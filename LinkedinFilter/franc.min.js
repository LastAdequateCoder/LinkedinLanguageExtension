/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/franc-min@6.1.0/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{asTuples}from"trigram-utils";import{expressions}from"./expressions.js";import{data}from"./data.js";const MAX_LENGTH=2048,MIN_LENGTH=10,MAX_DIFFERENCE=300,own={}.hasOwnProperty;let script;const numericData={};for(script in data)if(own.call(data,script)){const n=data[script];let t;for(t in numericData[script]={},n)if(own.call(n,t)){const e=n[t].split("|"),r={};let i=e.length;for(;i--;)r[e[i]]=i;numericData[script][t]=r}}export function franc(n,t){return francAll(n,t)[0][0]}export function francAll(n,t={}){const e=[...t.whitelist||[],...t.only||[]],r=[...t.blacklist||[],...t.ignore||[]],i=null!==t.minLength&&void 0!==t.minLength?t.minLength:10;if(!n||n.length<i)return und();const l=getTopScript(n=n.slice(0,2048),expressions);return l[0]&&l[0]in numericData?normalize(n,getDistances(asTuples(n),numericData[l[0]],e,r)):l[0]&&0!==l[1]&&allow(l[0],e,r)?singleLanguageTuples(l[0]):und()}function normalize(n,t){const e=t[0][1],r=300*n.length-e;let i=-1;for(;++i<t.length;)t[i][1]=1-(t[i][1]-e)/r||0;return t}function getTopScript(n,t){let e,r,i=-1;for(r in t)if(own.call(t,r)){const l=getOccurrence(n,t[r]);l>i&&(i=l,e=r)}return[e,i]}function getOccurrence(n,t){const e=n.match(t);return(e?e.length:0)/n.length||0}function getDistances(n,t,e,r){const i=[];let l;if(t=filterLanguages(t,e,r))for(l in t)own.call(t,l)&&i.push([l,getDistance(n,t[l])]);return 0===i.length?und():i.sort(sort)}function getDistance(n,t){let e=0,r=-1;for(;++r<n.length;){const i=n[r];let l=300;i[0]in t&&(l=i[1]-t[i[0]]-1,l<0&&(l=-l)),e+=l}return e}function filterLanguages(n,t,e){if(0===t.length&&0===e.length)return n;const r={};let i;for(i in n)allow(i,t,e)&&(r[i]=n[i]);return r}function allow(n,t,e){return 0===t.length&&0===e.length||(0===t.length||t.includes(n))&&!e.includes(n)}function und(){return singleLanguageTuples("und")}function singleLanguageTuples(n){return[[n,1]]}function sort(n,t){return n[1]-t[1]}
//# sourceMappingURL=/sm/4be5743cb0f1d3c83c8e5d2c54d65b87f3a7a8ec12f8dae6fb02e0784bde1e5c.map